{"kind":"@shape","id":"WeatherData","fields":{"temperature":"float","windspeed":"float","humidity":"float","location":"str","time":"str"}}
{"kind":"@fn","id":"get_weather","in":{},"out":{"weather":"WeatherData"},"@const":{"base_url":"https://api.open-meteo.com/v1/forecast","latitude":"43.0389","longitude":"-87.9065","location":"Milwaukee, WI"},"@op":[["concat",{"items":["$base_url","?latitude=","$latitude","&longitude=","$longitude","&current=temperature_2m,wind_speed_10m,relative_humidity_2m&temperature_unit=fahrenheit&wind_speed_unit=mph"]},{"as":"api_url"}],["http",{"method":"GET","url":"$api_url"},{"as":"response"}],["json_parse",{"text":"$response.text"},{"as":"data"}],["json_get",{"obj":"$data","path":"current.temperature_2m"},{"as":"temp"}],["json_get",{"obj":"$data","path":"current.wind_speed_10m"},{"as":"wind"}],["json_get",{"obj":"$data","path":"current.relative_humidity_2m"},{"as":"humid"}],["json_get",{"obj":"$data","path":"current.time"},{"as":"timestamp"}],["concat",{"items":["Weather for ","$location","\n","Temperature: ","$temp","Â°F\n","Wind Speed: ","$wind"," mph\n","Humidity: ","$humid","%\n","Time: ","$timestamp"]},{"as":"weather_text"}]],"@expect":{"weather":{"temperature":"$temp","windspeed":"$wind","humidity":"$humid","location":"$location","time":"$timestamp"}}}
{"kind":"@flow","edges":[["get_weather",null,{}]]}